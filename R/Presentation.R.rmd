---
title: 'R: program like a pirate'
author: "Brad Arrrrr Foley"
date: "05/13/2015"
output: html_document
fig.caption: yes
---

This workshop is aimed at getting you up and running in R, with a focus on things that are likely to be important for anyone working with large-ish data sets. 

# Topics: 
* Figuring out where you are, working directories, and file navigation
    + setwd(), getwd()
    + list.files(), list.dir()
    + ?list.files()
* R data structures, and how to access elements of them
    +  dataframes, lists?, arrays, matrices, vectors
    +  indexes, slices, which()
* R data types, and how to convert among them
     + integers, floats, characters, boolean and factors     
* read in, format, and concatenate tables
    + read.table()
    + rbind(), cbind(), 
    + colnames()    
    + reshape
* loops and functions
    + for loops
    + conditionals
    + functions 
          
# Don't do stuff on your desktop!
\newline  
\newline  
![alt text](figures/desktop.jpg)
<!---http://board.kafuka.org/thread.php?id=30&page=8-->
\newline  
  
The first thing you'll need to do is set the working directory. This is the address for the folder that contains your work. 

To figure out where the current working directory is, you can use the function 

```{r}
getwd()
```

**Exercise 1: Make this work on your computer**

This follows the standard R format of a function name (in this case **getwd**), followed by brackets. The brackets contain any information you need to pass to the function in order for it to work.  

When we want to change the working directory to another dedicated directory, we need to use the function **setwd** and include the new directory path:

```{r}
setwd("/media/brad/Data/Documents/softwareCarp/MCBWorkshop2015") 
```

**Exercise 2: Make this work on your computer**

For all you Windows people out there, note the backslashes. Also, note that **strings** in R are defined by quotation marks.   
  
As in Unix, if we want to navigate up a level in the file hierarchy, we can use the command **setwd("..")**. If we want to move back down a level, we can truncate the current directory using a **.**: **setwd("./softwareCarp")**.  

**Exercise 3: try this. List the contents of the subdirectory "./datafiles"**


# Reading in data 

To read data from a file  (the results of a gardenia-growing race, involving 3 friends), we use a function specific to the type of file: 
```{r}
read.csv("./data_files/gardenia.csv")
```

You notice that this doesn't do anything except print out the contents of the file "gardenia.csv". The reason is, that we haven't assigned the contents of the file to any object (a variable). We can create a new variable in R easily, using either **=** or **<-**

```{r}
gardenia = read.csv("./data_files/gardenia.csv")

gardenia
```
There are a few restrictions on what variables can be called (for instance, they can't start with a number, they can't contain spaces). But it turns out, you probably want to make them informative, and easy to type.

You can assign **string** values to a variable, or **integers**, or **floating** point numbers. You can use these variables the same way you use any other value.


**Exercise 4: create a variable, and assign a number to it. Now double the value assigned to that variable**

You can also create variables that contain multiple values. If these are 1 dimensional, we call them **vectors**. We create vectors using the combine function **c**

```{r}
dummyVector=c(4, 12, 1.3, 15, 0.1, 2.5, 7, 55)

dummyVector
```

You can perform many of the same operations on vectors that you can on single values

**Exercise 4: add numbers to dummyVector. Subtract. Divide. What happens if you add a vector containing 2 numbers to dummyVector? or 3?**

In vectors, all the variables need to be the same type.

Whenever I mention a new function, you can check out the help and documentation for that function using a **?**, as in 

```{r}
?read.csv
```
Sometimes the documentation is helpful, and sometimes it isn't. 
  

# Accessing data in vectors and dataframes

We can access specific values from a vector just by referring to the position of the number, using square brackets

```{r}
dummyVector
dummyVector[]
dummyVector[3]
dummyVector[3:6]

```

**Exercise 5: access the 1st, 3rd, and 5th values in dummyVector (hint, you'll need to use a vector inside the square brackets). Add 10 to only those values.**

The same operations work for dataframes. In this case we need to separate the column values from the row values, and we use a comma for this. Row values come before the comma, column values after. Remember **gardenia**?  

**A gardenia. From Little Shop of Horrors (1988)**
![alt text](./figures/gardenia.jpg)


```{r}
gardenia
gardenia[,]
gardenia[1,]
gardenia[,2]
gardenia[c(1:2), (2:3)]

```
Another really good feature of data frames are the column (and row) names. We can access a whole column of data by referring to the column by its name.

```{r}
gardenia[,"leaf_number"]

```

**Exercise 6: Some genius from Lockheed Martin measured the height of our friends' gardenias in inches, not centimeters. Given that an inch is 2.54 cm, convert the "height" column to centimeters. Quick! Before the gardenias crash into Mars and all is lost.**

  
# Some real (fake) data.  
The lab of Dr. Carol Lewis focuses on the effects of selection due to parasitism in the lesser snark, *Conniptus hemifittus* (Boojumnidae). In particular, the armored plate on the head (or cephalocalypse) apparently guards the brain of the lesser snark from the piercing ovipositor of the zombie-genic parasitoid beaver.  

Carol collected cephalocalpsis data from 2 lab reared populations (from Abu Dabi, and Juneau Alaska) before falling ill. Her intrepid post-doc, Ali Bellman returned from collecting the final population in Tierra del Fuego and finished the data collection.

The data consists of 4 measurements: cephalocalypsis length, width and area, as well as a body size proxy - abdothorax length.  

This much you piece together from the emails. But when you see the data they send you, you cry.  

**a snark. from http://wispychipmunk.deviantart.com/art/Mini-Snark-Sculpture-394639875**
![alt text](figures/snark.jpg)